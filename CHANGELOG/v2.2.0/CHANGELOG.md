<img width="1800" height="766" alt="新版本" src="https://github.com/SECTL/SecRandom/blob/master/data/assets/icon/secrandom-version.png" />
v2.0 - Koharu（小鸟游星野） release 3

## 🚀 主要更新

- 新增 **历史记录课程信息**，抽取时自动记录当前课程（支持 ClassIsland 和 CSES 课程表）
- 新增 **音乐随机播放**，支持随机选择音乐文件播放
- 新增 **通知渠道**，新增「SecRandom+ClassIsland」选项
- 新增 **字体粗细设置**，支持9种字体粗细（极细/特细/细体/常规/中等/半粗/粗体/特粗/极粗）
- 新增 **数量标签显示模式**，支持"总+剩余"、"总数"、"剩余数"、"不显示"四种模式
- 新增 **科目历史记录过滤**，支持仅使用当前科目历史记录计算权重，精准锁定学科数据，大幅提升抽取公平性！
- 新增 **历史记录课程筛选**，支持按课程快速筛选历史记录，一键定位目标数据，效率翻倍！
- 新增 **上课前解除课间禁用**，支持在上课前解除课间禁用功能
- 新增 **Sentry错误监控**，自动收集和上报程序错误，提升问题定位效率

## 💡 功能优化

- 优化 **退出流程**，确保资源释放完整与快速响应
- 优化 **动画流畅性**，新增控件复用减少重绘开销
- 优化 **闪抽动画日志**，减少不必要的日志输出
- 优化 **动画性能**，新增数据缓存减少频繁IO操作
- 优化 **通知渠道选择**，新增ClassIsland使用提示
- 优化 **浮窗点击识别**，减少误识别为拖动
- 优化 **安全验证逻辑**，统一使用项目验证系统
- 优化 **软件退出**，解决退出缓慢问题
- 优化 **URL 注册**，无需管理员权限即可完成
- 优化 **TEMP 清理**，仅清理 TEMP 文件夹
- 优化 **历史记录表格**，未设置性别/小组则隐藏对应列
- 优化 **音乐播放延迟**，减少文件读取和音频流初始化开销
- 优化 **浮动通知窗口**，预计算大小避免闪烁
- 优化 **抽奖历史记录**，统一时间显示格式、修复权重显示异常、修复抽取数量未存入历史记录文件的问题、移除抽取模式列
- 优化 **历史记录数据结构**，新增学科分类统计，提高查询效率
- 优化 **数据源选择**，支持三种数据源选择：不使用数据源、使用CSES课表数据、使用ClassIsland数据源

## 🐛 修复问题

- 修复 **程序退出**，解决进程残留与图标未消失问题
- 修复 **C# IPC 客户端**，解决退出报错与同步异步混合操作
- 修复 **URL命令解析**，修复命令匹配错误
- 修复 **验证窗口线程**，修复线程未清理导致的崩溃
- 修复 **托盘关于功能**，修复绕过安全验证问题
- 修复 **重启功能**，解决无法重启异常
- 修复 **URL 注册**，修复注册失败问题
- 修复 **收纳浮窗无焦点**，修复无焦点模式未生效
- 修复 **ClassIsland通知渠道显示时长**，修复时间未生效问题
- 修复 **闪抽颜色设置**，固定颜色未生效

## 🔧 其它变更

- 移除 **URL 中的通用命令**，简化命令处理
- 移除 **旧版ClassIsland通知函数**，清理冗余代码

---

💝 **感谢所有贡献者为 SecRandom 项目付出的努力！**
