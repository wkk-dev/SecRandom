v2.0 - Koharu（小鸟游星野） release 1

## 🚀 主要更新

- 新增 **获取星期几功能**，新增 `_get_current_day_of_week()` 函数用于获取当前是星期几
- 新增 **按星期几获取上课时间段功能**，新增 `get_class_times_by_day()` 和 `get_class_times_by_day_with_week()` 方法，支持按星期几和周数（单数/双数）获取上课时间段
- 新增 **智能拖动识别系统**，实现基于时间和距离的多因素拖动检测算法

## 💡 功能优化

- 优化 **时间判断逻辑**，重构 `_is_non_class_time()` 函数，改为直接判断当前时间是否在上课时间段内
- 优化 **CSES解析器代码结构**，重新排序方法组织，将公共方法按功能分组，私有方法统一放在文件末尾
- 优化 **代码复用性**，新增 `_sort_timeslots_by_time()`、`_build_subject_teacher_map()`、`_get_cses_parser()` 等方法，消除重复代码
- 优化 **类型提示统一性**，统一使用 `str | int` 格式替代 `Union[str, int]`
- 优化 **extract.py代码结构**，调整导入顺序为"标准库→第三方库→本地模块"，按功能分组函数
- 优化 **返回类型提示**，统一导入函数返回类型为 `Tuple[bool, str]`
- 优化 **设置持久化功能**，修复**浮动窗口拖动开关**和**长按持续时间设置**在应用重启后不生效的问题
- 优化 **拖动检测算法**，将基础拖动阈值从3px提高到8px，添加50ms最小拖动时间要求
- 优化 **导入功能**，新增传递下拉框中选中的**班级名称**和**奖池名称**到导入窗口
- 优化 **通知服务设置**，将**通知显示时长**设置从基础设置中分离，创建独立的**classisland通知服务设置**分类，提升设置界面的结构清晰度和用户体验
- 优化 **UI组件刷新机制**，为每个UI操作添加独立异常处理，确保对象删除时不会崩溃
- 优化 **文件监视器响应机制**，确保在UI组件销毁后仍能安全处理文件变化事件
- 优化 **CSES文件导入管理**，统一保存文件名为 `cses_schedule.yml`，每次导入自动覆盖旧文件

## 🐛 修复问题

- 修复 **主窗口大小保存功能**，修复主窗口大小无法正确保存和恢复的问题
- 修复 **侧边栏显示控制**，修复侧边栏设置中的"不显示"选项无效问题
- 修复 **课间禁用功能失效问题**，修复由于时间段排序错误、星期几分组错误和时间解析失败导致的功能异常
- 修复 **时间段排序问题**，修复按字符串排序导致的时间顺序错误，改为按实际时间值（秒数）排序
- 修复 **整数时间解析问题**，修复 `_parse_time_string_to_seconds()` 方法无法处理整数秒数的问题
- 修复 **异步函数调用问题**，修复 `readme_settings_async` 导致的 coroutine 对象问题
- 修复 **模块导入位置问题**，将 `shutil`、`os` 等导入移至适当位置，避免全局导入导致的问题
- 修复 **星期几分组问题**，修复不同星期几的课程时间被错误混合计算的问题
- 修复 **名单统计功能**，新增过滤标记为"不存在"的学生/奖品，确保剩余数量显示准确
- 修复 **拖动权限控制**，解决即使禁用拖动功能仍然可以拖动窗口的问题
- 修复 **点击与拖动区分**，解决按钮点击容易被误识别为拖动操作的问题
- 修复 **嵌套组件权限继承**，修复DraggableWidget组件未正确继承主窗口拖动权限的问题
- 修复 **收纳浮窗显示问题**，修复文本颜色、透明度计算、背景色、CSS样式冲突、圆角效果等问题
- 修复 **名单管理界面**，优化UI组件操作的安全性，避免"Internal C++ object already deleted"错误
- 修复 **导入窗口显示问题**，确保显示当前选中的班级或奖池名称
- 修复 **倒计时逻辑**，确保显示数字与实际关闭时间一致
- 修复 **倒计时显示0后立即关闭**，消除额外等待1秒问题

## 🔧 其它变更

- 无

---

💝 **感谢所有贡献者为 SecRandom 项目付出的努力！**

<!--
撰写 CHANGELOG.md 时，请统一采用「新增/优化/修复」+「**功能名称**」+「更新内容」的句式，示例：
- 新增 **更新通知弹窗**，新增「今日不再提醒」选项
- 优化 **课间禁用功能**，新增点名/抽奖「开始」按钮的禁用提示
- 修复 **DPI 缩放问题**，新增界面字体与比例异常修复

要求：
1. 每条限 25 字以内，避免冗余；
2. 关键名称或特性加**粗**；
3. 同类项合并，保持顺序一致。
-->
